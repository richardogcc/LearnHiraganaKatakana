<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="icons8-japan-16.png" type="image/x-icon">
    <title>Hiragana & Katakana</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            transition: background-color 0.5s ease;
        }

        .container {
            text-align: center;
        }

        .mode-select {
            margin-bottom: 2rem;
        }

        button {
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.05);
        }

        .character-display {
            font-size: 8rem;
            margin: 2rem 0;
            min-height: 120px;
        }

        .input-field {
            padding: 15px;
            font-size: 1.5rem;
            width: 200px;
            text-align: center;
            border: 2px solid #ccc;
            border-radius: 5px;
            margin-bottom: 1rem;
        }

        .input-field:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .character-display.correct {
            color: #4CAF50 !important;
        }

        .game-screen {
            display: none;
        }

        .stats {
            font-size: 1.2rem;
            color: #666;
        }

        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #333;
            color: #fff;
        }

        body.dark-mode .stats {
            color: #ccc;
        }

        body.dark-mode .input-field {
            background-color: #444;
            color: #fff;
            border-color: #555;
        }

        body.dark-mode .input-field:focus {
            border-color: #777;
        }

        body.dark-mode .character-display.correct {
            color: #98ee98 !important;
            /* Eliminar background-color */
        }

        /* Dark Mode Toggle Button */
        .dark-mode-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 24px;
            color: #555;
        }

        body.dark-mode .dark-mode-toggle {
            color: #ffc107;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 999;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(255, 255, 255, 0.9);
            /* Fondo claro */
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #f9f9f9;
            margin: auto;
            padding: 20px;
            max-width: 80%;
            position: relative;
            border-radius: 5px;
            text-align: center;
        }

        .close-button {
            position: absolute;
            right: 0;
            top: 0;
            font-size: 3rem;
            background: none;
            border: none;
            cursor: pointer;
            color: #555;
        }
    </style>
</head>

<body>
    <button class="dark-mode-toggle">‚òÄÔ∏è</button>
    <div class="container">
        <div class="mode-select">
            <h2>Hiragana</h2>
            <div class="cheat-sheet-hiragana">
                <button onclick="showHiragana()">Show Hiragana</button>
            </div>
            <button onclick="startGame('hiragana')">„ÅÇ - a</button>
            <button onclick="startGame('romaji')">a - „ÅÇ</button>
            <button onclick="startGame('hiragana-extended')">„Å† - da</button>
            <button onclick="startGame('romaji-hiragana-extended')">da - „Å†</button>

            <h2>Katakana</h2>
            <div class="cheat-sheet-katakana">
                <button onclick="showKatakana()">Show Katakana</button>
            </div>
            <button onclick="startGame('katakana')">„Ç¢ - a</button>
            <button onclick="startGame('romaji-katakana')">a - „Ç¢</button>
            <button onclick="startGame('katakana-extended')">„ÉÄ - da</button>
            <button onclick="startGame('romaji-katakana-extended')">da - „ÉÄ</button>
        </div>

        <div class="game-screen">
            <div class="character-display"></div>
            <input type="text" class="input-field" autofocus>
            <div class="stats">
                <span id="remaining">0</span> left
            </div>
            <button style="margin-top: 4rem;" onclick="returnToMenu()">Menu</button>
        </div>
    </div>

    <div id="imageModal" class="modal">
        <div class="modal-content">
            <button class="close-button" onclick="closeModal()">&times;</button>
            <img id="modalImage" alt="" style="max-width: 100%;">
        </div>
    </div>

    <script>
        const hiraganaData = [
            { hiragana: '„ÅÇ', romaji: 'a' },
            { hiragana: '„ÅÑ', romaji: 'i' },
            { hiragana: '„ÅÜ', romaji: 'u' },
            { hiragana: '„Åà', romaji: 'e' },
            { hiragana: '„Åä', romaji: 'o' },
            { hiragana: '„Åã', romaji: 'ka' },
            { hiragana: '„Åç', romaji: 'ki' },
            { hiragana: '„Åè', romaji: 'ku' },
            { hiragana: '„Åë', romaji: 'ke' },
            { hiragana: '„Åì', romaji: 'ko' },
            { hiragana: '„Åï', romaji: 'sa' },
            { hiragana: '„Åó', romaji: 'shi' },
            { hiragana: '„Åô', romaji: 'su' },
            { hiragana: '„Åõ', romaji: 'se' },
            { hiragana: '„Åù', romaji: 'so' },
            { hiragana: '„Åü', romaji: 'ta' },
            { hiragana: '„Å°', romaji: 'chi' },
            { hiragana: '„Å§', romaji: 'tsu' },
            { hiragana: '„Å¶', romaji: 'te' },
            { hiragana: '„Å®', romaji: 'to' },
            { hiragana: '„Å™', romaji: 'na' },
            { hiragana: '„Å´', romaji: 'ni' },
            { hiragana: '„Å¨', romaji: 'nu' },
            { hiragana: '„Å≠', romaji: 'ne' },
            { hiragana: '„ÅÆ', romaji: 'no' },
            { hiragana: '„ÅØ', romaji: 'ha' },
            { hiragana: '„Å≤', romaji: 'hi' },
            { hiragana: '„Åµ', romaji: 'fu' },
            { hiragana: '„Å∏', romaji: 'he' },
            { hiragana: '„Åª', romaji: 'ho' },
            { hiragana: '„Åæ', romaji: 'ma' },
            { hiragana: '„Åø', romaji: 'mi' },
            { hiragana: '„ÇÄ', romaji: 'mu' },
            { hiragana: '„ÇÅ', romaji: 'me' },
            { hiragana: '„ÇÇ', romaji: 'mo' },
            { hiragana: '„ÇÑ', romaji: 'ya' },
            { hiragana: '„ÇÜ', romaji: 'yu' },
            { hiragana: '„Çà', romaji: 'yo' },
            { hiragana: '„Çâ', romaji: 'ra' },
            { hiragana: '„Çä', romaji: 'ri' },
            { hiragana: '„Çã', romaji: 'ru' },
            { hiragana: '„Çå', romaji: 're' },
            { hiragana: '„Çç', romaji: 'ro' },
            { hiragana: '„Çè', romaji: 'wa' },
            { hiragana: '„Çí', romaji: 'wo' },
            { hiragana: '„Çì', romaji: 'n' },
        ];

        const hiraganaDataExtended = [
            { hiragana: '„Åå', romaji: 'ga' },
            { hiragana: '„Åé', romaji: 'gi' },
            { hiragana: '„Åê', romaji: 'gu' },
            { hiragana: '„Åí', romaji: 'ge' },
            { hiragana: '„Åî', romaji: 'go' },
            { hiragana: '„Åñ', romaji: 'za' },
            { hiragana: '„Åò', romaji: 'ji' },
            { hiragana: '„Åö', romaji: 'zu' },
            { hiragana: '„Åú', romaji: 'ze' },
            { hiragana: '„Åû', romaji: 'zo' },
            { hiragana: '„Å†', romaji: 'da' },
            { hiragana: '„Å¢', romaji: 'ji' },
            { hiragana: '„Å•', romaji: 'zu' },
            { hiragana: '„Åß', romaji: 'de' },
            { hiragana: '„Å©', romaji: 'do' },
            { hiragana: '„Å∞', romaji: 'ba' },
            { hiragana: '„Å≥', romaji: 'bi' },
            { hiragana: '„Å∂', romaji: 'bu' },
            { hiragana: '„Åπ', romaji: 'be' },
            { hiragana: '„Åº', romaji: 'bo' },
            { hiragana: '„Å±', romaji: 'pa' },
            { hiragana: '„Å¥', romaji: 'pi' },
            { hiragana: '„Å∑', romaji: 'pu' },
            { hiragana: '„Å∫', romaji: 'pe' },
            { hiragana: '„ÅΩ', romaji: 'po' },
        ];

        const katakanaData = [
            { katakana: '„Ç¢', romaji: 'a' },
            { katakana: '„Ç§', romaji: 'i' },
            { katakana: '„Ç¶', romaji: 'u' },
            { katakana: '„Ç®', romaji: 'e' },
            { katakana: '„Ç™', romaji: 'o' },
            { katakana: '„Ç´', romaji: 'ka' },
            { katakana: '„Ç≠', romaji: 'ki' },
            { katakana: '„ÇØ', romaji: 'ku' },
            { katakana: '„Ç±', romaji: 'ke' },
            { katakana: '„Ç≥', romaji: 'ko' },
            { katakana: '„Çµ', romaji: 'sa' },
            { katakana: '„Ç∑', romaji: 'shi' },
            { katakana: '„Çπ', romaji: 'su' },
            { katakana: '„Çª', romaji: 'se' },
            { katakana: '„ÇΩ', romaji: 'so' },
            { katakana: '„Çø', romaji: 'ta' },
            { katakana: '„ÉÅ', romaji: 'chi' },
            { katakana: '„ÉÑ', romaji: 'tsu' },
            { katakana: '„ÉÜ', romaji: 'te' },
            { katakana: '„Éà', romaji: 'to' },
            { katakana: '„Éä', romaji: 'na' },
            { katakana: '„Éã', romaji: 'ni' },
            { katakana: '„Éå', romaji: 'nu' },
            { katakana: '„Éç', romaji: 'ne' },
            { katakana: '„Éé', romaji: 'no' },
            { katakana: '„Éè', romaji: 'ha' },
            { katakana: '„Éí', romaji: 'hi' },
            { katakana: '„Éï', romaji: 'fu' },
            { katakana: '„Éò', romaji: 'he' },
            { katakana: '„Éõ', romaji: 'ho' },
            { katakana: '„Éû', romaji: 'ma' },
            { katakana: '„Éü', romaji: 'mi' },
            { katakana: '„É†', romaji: 'mu' },
            { katakana: '„É°', romaji: 'me' },
            { katakana: '„É¢', romaji: 'mo' },
            { katakana: '„É§', romaji: 'ya' },
            { katakana: '„É¶', romaji: 'yu' },
            { katakana: '„É®', romaji: 'yo' },
            { katakana: '„É©', romaji: 'ra' },
            { katakana: '„É™', romaji: 'ri' },
            { katakana: '„É´', romaji: 'ru' },
            { katakana: '„É¨', romaji: 're' },
            { katakana: '„É≠', romaji: 'ro' },
            { katakana: '„ÉØ', romaji: 'wa' },
            { katakana: '„É≤', romaji: 'wo' },
            { katakana: '„É≥', romaji: 'n' },
        ];

        const katakanaDataExtended = [
            { katakana: '„Ç¨', romaji: 'ga' },
            { katakana: '„ÇÆ', romaji: 'gi' },
            { katakana: '„Ç∞', romaji: 'gu' },
            { katakana: '„Ç≤', romaji: 'ge' },
            { katakana: '„Ç¥', romaji: 'go' },
            { katakana: '„Ç∂', romaji: 'za' },
            { katakana: '„Ç∏', romaji: 'ji' },
            { katakana: '„Ç∫', romaji: 'zu' },
            { katakana: '„Çº', romaji: 'ze' },
            { katakana: '„Çæ', romaji: 'zo' },
            { katakana: '„ÉÄ', romaji: 'da' },
            { katakana: '„ÉÇ', romaji: 'ji' },
            { katakana: '„ÉÖ', romaji: 'zu' },
            { katakana: '„Éá', romaji: 'de' },
            { katakana: '„Éâ', romaji: 'do' },
            { katakana: '„Éê', romaji: 'ba' },
            { katakana: '„Éì', romaji: 'bi' },
            { katakana: '„Éñ', romaji: 'bu' },
            { katakana: '„Éô', romaji: 'be' },
            { katakana: '„Éú', romaji: 'bo' },
            { katakana: '„Éë', romaji: 'pa' },
            { katakana: '„Éî', romaji: 'pi' },
            { katakana: '„Éó', romaji: 'pu' },
            { katakana: '„Éö', romaji: 'pe' },
            { katakana: '„Éù', romaji: 'po' },
        ];

        let currentMode;
        let currentIndex = 0;
        let practiceSet = [];

        function startGame(mode) {
            currentMode = mode;
            if (mode === 'hiragana') {
                practiceSet = shuffleArray([...hiraganaData]);
            } else if (mode === 'romaji') {
                practiceSet = shuffleArray([...hiraganaData]);
            } else if (mode === 'katakana') {
                practiceSet = shuffleArray([...katakanaData]);
            } else if (mode === 'romaji-katakana') {
                practiceSet = shuffleArray([...katakanaData]);
            } else if (mode === 'hiragana-extended') {
                practiceSet = shuffleArray([...hiraganaDataExtended]);
            } else if (mode === 'romaji-hiragana-extended') {
                practiceSet = shuffleArray([...hiraganaDataExtended]);
            } else if (mode === 'katakana-extended') {
                practiceSet = shuffleArray([...katakanaDataExtended]);
            } else if (mode === 'romaji-katakana-extended') {
                practiceSet = shuffleArray([...katakanaDataExtended]);
            }
            currentIndex = 0;

            document.querySelector('.mode-select').style.display = 'none';
            document.querySelector('.game-screen').style.display = 'block';
            document.querySelector('.input-field').value = '';

            showNextCharacter();
            updateStats();
        }

        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function showNextCharacter() {
            const display = document.querySelector('.character-display');
            if (currentMode === 'hiragana') {
                display.textContent = practiceSet[currentIndex].hiragana;
            } else if (currentMode === 'romaji') {
                display.textContent = practiceSet[currentIndex].romaji;
            } else if (currentMode === 'katakana') {
                display.textContent = practiceSet[currentIndex].katakana;
            } else if (currentMode === 'romaji-katakana') {
                display.textContent = practiceSet[currentIndex].romaji;
            } else if (currentMode === 'hiragana-extended') {
                display.textContent = practiceSet[currentIndex].hiragana;
            } else if (currentMode === 'romaji-hiragana-extended') {
                display.textContent = practiceSet[currentIndex].romaji;
            } else if (currentMode === 'katakana-extended') {
                display.textContent = practiceSet[currentIndex].katakana;
            } else if (currentMode === 'romaji-katakana-extended') {
                display.textContent = practiceSet[currentIndex].romaji;
            }
        }

        function checkAnswer(input) {
            let correctAnswer;
            if (currentMode === 'hiragana') {
                correctAnswer = practiceSet[currentIndex].romaji;
            } else if (currentMode === 'romaji') {
                correctAnswer = practiceSet[currentIndex].hiragana;
            } else if (currentMode === 'katakana') {
                correctAnswer = practiceSet[currentIndex].romaji;
            } else if (currentMode === 'romaji-katakana') {
                correctAnswer = practiceSet[currentIndex].katakana;
            } else if (currentMode === 'hiragana-extended') {
                correctAnswer = practiceSet[currentIndex].romaji;
            } else if (currentMode === 'romaji-hiragana-extended') {
                correctAnswer = practiceSet[currentIndex].hiragana;
            } else if (currentMode === 'katakana-extended') {
                correctAnswer = practiceSet[currentIndex].romaji;
            } else if (currentMode === 'romaji-katakana-extended') {
                correctAnswer = practiceSet[currentIndex].katakana;
            }

            if (input.trim().toLowerCase() === correctAnswer.toLowerCase()) {
                document.querySelector('.character-display').classList.add('correct');
                setTimeout(() => {
                    document.querySelector('.character-display').classList.remove('correct');
                    currentIndex++;
                    if (currentIndex >= practiceSet.length) {
                        if (currentMode === 'hiragana' || currentMode === 'romaji') {
                            practiceSet = shuffleArray([...hiraganaData]);
                        } else if (currentMode === 'katakana' || currentMode === 'romaji-katakana') {
                            practiceSet = shuffleArray([...katakanaData]);
                        } else if (currentMode === 'hiragana-extended' || currentMode === 'romaji-hiragana-extended') {
                            practiceSet = shuffleArray([...hiraganaDataExtended]);
                        } else if (currentMode === 'katakana-extended' || currentMode === 'romaji-katakana-extended') {
                            practiceSet = shuffleArray([...katakanaDataExtended]);
                        }
                        currentIndex = 0;
                    }
                    showNextCharacter();
                    document.querySelector('.input-field').value = '';
                    updateStats();
                }, 150);
                return true;
            }
            return false;
        }

        function updateStats() {
            document.getElementById('remaining').textContent =
                practiceSet.length - currentIndex;
        }

        function returnToMenu() {
            document.querySelector('.mode-select').style.display = 'block';
            document.querySelector('.game-screen').style.display = 'none';
        }

        function showHiragana() {
            openModal('hiragana.svg', 'Hiragana Chart');
        }

        function showKatakana() {
            openModal('katakana.svg', 'Katakana Chart');
        }

        function openModal(src, altText) {
            const modal = document.getElementById('imageModal');
            const img = document.getElementById('modalImage');
            img.src = src;
            img.alt = altText;
            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }

        // Event listeners
        document.querySelector('.input-field').addEventListener('input', (e) => {
            checkAnswer(e.target.value);
        });
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const darkModeToggle = document.querySelector('.dark-mode-toggle');
            const isDarkMode = localStorage.getItem('darkMode') === 'enabled';

            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                darkModeToggle.textContent = 'üåô';
            } else {
                darkModeToggle.textContent = '‚òÄÔ∏è';
            }

            darkModeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDarkMode = document.body.classList.contains('dark-mode');
                darkModeToggle.textContent = isDarkMode ? 'üåô' : '‚òÄÔ∏è';
                localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');
            });
        });
    </script>

</body>

</html>